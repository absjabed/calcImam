<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="style_4.css">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
	<title>A Simple Calculator</title>
</head>
<body>
	<div class="container">
		<div class="calculator">
			<div class="result">
				<div class="history">
					<p class="history-value" id="matInput">0</p>
				</div>
				<div class="output">
					<p class="output-value" id="matOutput">0 </p>
				</div>
			</div>
			<div class="keyboard">
				<button class="operator" onclick="cClicked()" id="clear">C</button>
				<button class="operator" onclick="ceClicked()" id="backspace">CE</button>
				<button onclick="numClicked(this)" class="operator" id="btnPercent">%</button>
				<button onclick="numClicked(this)" class="operator" id="btnDivision">/</button>
				<button onclick="numClicked(this)" class="number" id="btnSeven">7</button>
				<button onclick="numClicked(this)" class="number" id="btnEight">8</button>
				<button onclick="numClicked(this)" class="number" id="btnNine">9</button>
				<button onclick="numClicked(this)" class="operator" id="btnMultiply">*</button>
				<button onclick="numClicked(this)" class="number" id="btnFour">4</button>
				<button onclick="numClicked(this)" class="number" id="btnFive">5</button>
				<button onclick="numClicked(this)" class="number" id="btnSix">6</button>
				<button onclick="numClicked(this)" class="operator" id="btnMinus">-</button>
				<button onclick="numClicked(this)" class="number" id="btnOne">1</button>
				<button onclick="numClicked(this)" class="number" id="btnTwo">2</button>
				<button onclick="numClicked(this)" class="number" id="btnThree">3</button>
				<button onclick="numClicked(this)" class="operator" id="btnAdd">+</button>
				<button style="background-color: #eaedef;" class="empty" id="empty"></button>
				<button onclick="numClicked(this)" class="number" id="btnZero">0</button>
				<button onclick="numClicked(this)" class="number" id="btnDecimal">.</button>
				<button onclick="calculateResult()" class="operator" id="btnEqual">=</button>
			</div>
		</div>
	</div>
	<script>
		//src="calcScript.js"
		"use strict";
var mainInput = '';
var mainResult = '';

function numClicked(id) {
    mainInput += id.innerHTML;
        updateInputScreen(mainInput);
  }

function ceClicked(){
    mainInput = mainInput.slice(0, -1);
    updateInputScreen(mainInput);
}

function cClicked(){
    mainInput="";
    mainResult ="";
    updateInputScreen(mainInput);
    updateMainResult(mainResult)
}

function updateInputScreen(inputs){
    document.getElementById("matInput").innerHTML = inputs;
}

function updateMainResult(results){
    document.getElementById("matOutput").innerHTML = results;
}

function calculateResult(){
    try {
    
        if(mainInput[mainInput.length-1]==='%'){
        var mainInputWithoutPer = mainInput.slice(0,mainInput.lastIndexOf("*"))
        //console.log(mainInputWithoutPer)
        var mainResultWithoutPer = evil(mainInputWithoutPer);
        //console.log(mainResultWithoutPer)
        var perNum = mainInput.slice(mainInput.lastIndexOf("*")+1,mainInput.length-1)
        var percentageValue = mainResultWithoutPer * (perNum/100);
        mainResult = percentageValue;
        //console.log(percentageValue)
    }else{
        mainResult = evil(mainInput);
    }
        
    } catch (error) {
        mainResult = "Error, Try again!";
    }
    updateMainResult(mainResult)
}

function evil(fn) {
    return new Function('return ' + fn)();
  }
	</script>

</body>
</html>
